worker_processes auto;
events {
  worker_connections 1024;
}
http {
  include       mime.types;
  default_type  application/octet-stream;
  sendfile      on;
  
  # These names (service1, service2) will match the Docker Compose service names.
  upstream service1 {
    server service1:3001;
  }
  upstream service2 {
    server service2:3002;
  }

  server {
    listen 80;
    server_name localhost;  # or your domain in production

    # Forward calls to /service1/* to service1 container
    location /service1/ {
      proxy_pass http://service1/;
    }

    # Forward calls to /service2/* to service2 container
    location /service2/ {
      proxy_pass http://service2/;
    }

    # Optional: root route
    location / {
      return 200 'NGINX Gateway is up.\n';
    }
  }
}
